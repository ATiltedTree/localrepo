From 9f21622ae208f49adddf9e8465295229661579ec Mon Sep 17 00:00:00 2001
From: "Antoine Martin" <dev@ayakael.net>
Date: Thu, 20 Jan 2022 01:12:07 +0000
Subject: [PATCH 1/1] build_copy-sbrp

By default, build moves SourceBuildReferencePackages subfolder its own
folder. Given that artifacts are in a read-only location under this
aport, this patch makes build copy instead of move the subfolder

---
 tools-local/init-build.proj | 1 +
 1 files changed, 1 insertions(+), 1 deletion(-)

--- a/tools-local/init-build.proj
+++ b/tools-local/init-build.proj
@@ -63,7 +63,7 @@
     <UnpackedSourceBuildReferencePackages Include="$(PrebuiltSourceBuiltPackagesPath)SourceBuildReferencePackages/*"/>
     </ItemGroup>
 
-    <Move SourceFiles="@(UnpackedSourceBuildReferencePackages)" DestinationFiles="$(ReferencePackagesDir)%(Filename)%(Extension)" />
+    <Copy SourceFiles="@(UnpackedSourceBuildReferencePackages)" DestinationFiles="$(ReferencePackagesDir)%(Filename)%(Extension)" />
 
     <!-- remove some reference packages that are generated incorrectly and instead use the prebuilt checked-in version instead -->
     <!-- relevant issues: https://github.com/dotnet/runtime/issues/44646, https://github.com/dotnet/runtime/issues/45183,
--
2.34.1

